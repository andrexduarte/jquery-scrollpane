/*!
 * Scrollpane plugin
 *
 * This plugin simulates the "iOS" scroll interface with an intuitive scrollbar
 * that only appears when focused.
 *
 * Author: Josh Sullivan (heavily altered from unknown source)
 * Version: 1.0
 */
(function(b){function o(){var e=b('<div style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-2000px;left:-2000px;"><div style="height:100px;"></div></div>');b("body").append(e);var d=b("div",e).innerWidth();e.remove();return 50-d}function p(b,d){var a=0;return function(){var c;+new Date-a>d&&(a=+new Date,b.apply(this,arguments))}}b.fn.scrollpane=function(e){e=b.extend({idleOpacity:"0"},e||{});return this.each(function(){function d(){var f=o(),c=b('<div class="scrollbar-container" style="width:'+
f+'px;display:none;"><div class="scrollbar-track"><div class="scrollbar-drag"></div></div></div>'),d=b('<div class="scrollpane-content"></div>'),g=b(".scrollbar-drag",c);g.css("opacity",e.idleOpacity);a.wrapInner(d);a.append(c);a.attr("data-scrollpane",!0);d=b("> div:first",a);d.css({overflow:"hidden"});a.css({marginRight:"-"+f+"px",overflowX:"hidden",overflowY:"scroll",height:"100%"});a.bind("mouseenter.scrollpane",function(){g.animate({duration:100,opacity:"0.5"})});a.bind("mouseleave.scrollpane",
function(){g.animate({duration:100,opacity:e.idleOpacity})});a.bind("scroll.scrollpane",p(function(){a.trigger("updateDragTop")},10));g.mousedown(function(f){b(document).unbind("mousemove.scrollpane");f.preventDefault();var c=f.pageY-g.offset().top;b(document).bind("mousemove.scrollpane",function(b){a.scrollTop((b.pageY-a.offset().top-c)/(a.height()/d.outerHeight()));return!1}).mouseup(function(){b(document).unbind("mousemove.scrollpane")});return!1});(function q(){setTimeout(function(){a.trigger("resizeCheck");
q()},500)})();f={scrollbar:c,content:d,track:b(".scrollbar-track",c),drag:g};a.data("scrollpane",f);return f}var a=b(this),c=a.data("scrollpane");c||(c=d());var i=c.scrollbar,m=c.content,j=c.drag,n=m.outerHeight(),h=a.height(),k=a.offset(),l=h/n;b.browser.msie&&b.browser.version.charAt(0)==="7"?(a.height(a.parent().height()),a.css({"margin-right":"0px","overflow-y":"auto",position:"relative"})):(l<1?(i.show(),i.height(h),j.height(Math.floor(h*l)-6)):i.hide(),a.unbind("updateDragTop").bind("updateDragTop",
function(){var b=a.scrollTop();b=Math.min(Math.round(b*l),h-j.height());j.css("top",b+"px")}),a.unbind("resizeCheck").bind("resizeCheck",function(){var b=a.offset();if(b&&k&&(a.height()!=h||m.height()!=n||b.top!=k.top||b.left!=k.left))try{a.scrollpane()}catch(c){}}))})}})(jQuery,window);